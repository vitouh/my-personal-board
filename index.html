<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>/who’s vito?/</title>

<style>
body {
  background:#f2e2d4;
  color:#000;
  font-family: Arial, Helvetica, sans-serif;
  font-size:12px;
  margin:0;
}
a { color:#800000; text-decoration:none; }
a:hover { text-decoration:underline; }

/* top bar */
.top-bar {
  background:#ffe;
  border-bottom:2px solid #d6b7a7;
  text-align:center;
  padding:4px;
  font-size:11px;
}
.top-bar span { margin:0 6px; cursor:pointer; }

/* layout */
.wrap { max-width:860px; margin:auto; padding:8px; }

.board-header {
  text-align:center;
  margin:20px 0;
}
.board-header h1 {
  font-family:"Times New Roman", serif;
  font-size:26px;
  color:#800000;
  margin:0;
}

/* op post */
.op {
  background:#fff;
  border:2px solid #d6b7a7;
  padding:6px;
}
.post-head {
  font-size:11px;
  margin-bottom:4px;
}
.name { color:#117743; font-weight:bold; }

.image-row {
  display:flex;
  justify-content:center;
  gap:12px;
  margin:12px 0;
}
.image-row img {
  width:150px;
  border:1px solid #aaa;
}

/* comments */
#comments { margin-top:12px; }
.comment {
  border:2px solid #aaa;
  background:#f6efe8;
  padding:6px;
  margin:6px 0;
  font-size:14px;
}
.reply {
  margin-left:20px;
}

textarea {
  width:100%;
  height:80px;
  font-size:14px;
}
input {
  font-size:14px;
  margin-bottom:4px;
}

button {
  font-size:12px;
  padding:4px 8px;
  margin-left:6px;
  cursor:pointer;
}

.footer {
  text-align:center;
  font-size:10px;
  color:#555;
  margin:40px 0 20px;
}
</style>
</head>

<body>

<div class="top-bar">
  <span>[ home ]</span>
  <span>[ about ]</span>
  <span onclick="location.href='so-well.html'">[ Log in/Sign up ]</span>
  <span onclick="location.href='rick-roll.html'">[ What else? ]</span>
</div>

<div class="wrap">

<div class="board-header">
  <h1>/who’s vito?/</h1>
  <p>my own personal board</p>
</div>

<div class="op">
  <div class="post-head">
    <span class="name">Don V.</span> — Teen
  </div>

Heya!! I’m Don V! More formally, Don Vito, You can call me Don, Vito or V, whatever you’d like!  
Someone that has a ridiculous amount of humor - Plato  

Subjects I love so much are Philosophy, Theology, Psychology, History, Social Studies and Politics.  
When I say everything, I mean EVERYTHING.  

Sports I do: Football and Badminton.  
I don’t like Basketball that much… don’t ask why.  

Fun fact: I’m a universal donor. Blood type O-.  

Ask me anything (keep it fun).

<div class="image-row">
  <img src="me1.jpg">
  <img src="me2.jpg">
  <img src="me3.jpg">
</div>

Thats it, get out.  
(I’m joking, feel free to check out more in the website.)
</div>

<h3>Comment Section</h3>
<input id="name" placeholder="Your name"><br>
<textarea id="text" placeholder="Write a comment..."></textarea><br>
<button onclick="postComment()">Post</button>

<div id="comments"></div>

<div class="footer">
  static board · just me · enjoy
</div>
</div>

<!-- FIREBASE + REPLIES -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import {
  getFirestore, collection, addDoc, onSnapshot,
  serverTimestamp, deleteDoc, doc, query, orderBy
} from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBUxo-7rLsYMjjOSQDYczqwcrh_pyX7D1o",
  authDomain: "vito-board.firebaseapp.com",
  projectId: "vito-board"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

let uid = localStorage.getItem("uid");
if(!uid){
  uid = crypto.randomUUID();
  localStorage.setItem("uid", uid);
}

const q = query(collection(db,"comments"), orderBy("time","asc"));
onSnapshot(q, snap => {
  comments.innerHTML = "";
  const all = [];
  snap.forEach(d => all.push({id:d.id, ...d.data()}));
  all.filter(c=>!c.parent).forEach(c => render(c, all, 0));
});

function render(c, all, level){
  const div = document.createElement("div");
  div.className = "comment";
  if(level) div.classList.add("reply");
  div.innerHTML = `<b>${c.name}</b>: ${c.text}`;

  if(c.uid === uid){
    const del = document.createElement("button");
    del.textContent = "Delete";
    del.onclick = ()=>deleteDoc(doc(db,"comments",c.id));
    div.appendChild(del);
  }

  const reply = document.createElement("button");
  reply.textContent = "Reply";
  reply.onclick = ()=>{
    const box = document.createElement("textarea");
    box.style.height="40px";
    const send = document.createElement("button");
    send.textContent="Send";
    send.onclick = async ()=>{
      if(!box.value.trim()) return;
      await addDoc(collection(db,"comments"),{
        name:name.value||"Anonymous",
        text:box.value,
        uid,
        parent:c.id,
        time:serverTimestamp()
      });
      box.remove(); send.remove();
    };
    div.appendChild(box);
    div.appendChild(send);
  };
  div.appendChild(reply);

  comments.appendChild(div);
  all.filter(r=>r.parent===c.id).forEach(r=>render(r,all,level+1));
}

window.postComment = async ()=>{
  if(!text.value.trim()) return;
  await addDoc(collection(db,"comments"),{
    name:name.value||"Anonymous",
    text:text.value,
    uid,
    time:serverTimestamp()
  });
  text.value="";
};
</script>

</body>
</html>
